# Viewer Asset Specs (Textures and Character Sprites)

Practical guidelines for creating images that work well in the viewer. Focused on size, format, color, and pitfalls to avoid.

## Wall/Floor/Ceiling Textures
- File format
  - PNG (RGBA, 8‑bit per channel). Avoid JPEG (compression artifacts) and WebP (node loader doesn’t support it).
  - Color space: sRGB. The renderer treats data as sRGB; embedded exotic profiles may shift colors.
- Dimensions
  - Square, power‑of‑two strongly recommended: 64×64 (default), or 128×128 for more detail.
  - Multiples of 8 for best tiling. Very large images (>512×512) waste CPU/memory with little visual gain.
- Tiling requirements
  - Walls: must tile seamlessly horizontally; vertical seams are ok but horizontal repetition is common.
  - Floors/Ceilings: tile seamlessly on both axes.
- Alpha channel
  - Prefer fully opaque textures for walls/floors/ceilings.
  - If you use transparency, make edges hard or apply alpha‑bleed to avoid halos on nearest‑neighbor scaling.
- Color and shading
  - Provide “albedo” style textures: neutral lighting. The engine applies lighting via a LightLUT; avoid baked highlights/shadows.
  - Keep mid‑tone energy; extremes (too dark/too bright) reduce lighting range.
- What to avoid
  - Non‑tileable edges, anti‑aliased borders, or thin one‑pixel lines that shimmer at distance.
  - Premultiplied alpha exports (expect unpremultiplied RGBA). Most PNG tools are fine.
  - Non‑square textures for walls/floors (will stretch visually).

Memory budget hint: RGBA8 uses width × height × 4 bytes. A 64×64 texture is ~16 KiB.

## Character Sprites (Billboards)
- File format
  - PNG (RGBA, 8‑bit). Transparent background around the silhouette.
  - Avoid JPEG and semi‑transparent matte backgrounds (cause fringing).
- Dimensions and scale
  - Recommended height: 48–96 px at the internal resolution (320×200). 64×64 is a good starting point.
  - Keep consistent scale across characters of similar size. Wider images increase on‑screen width; mind aspect.
- Pivot (ground contact)
  - The renderer uses a vertical pivot (pivotY) measured in pixels from the top.
  - Default pivotY is the image’s height (feet on the bottom edge). Override via `createSpriteProvider(..., pivots)` if needed.
  - Tip: set pivot a couple of pixels above the bottom to avoid clipping (e.g., height − 2).
- Naming and variants
  - Keys follow `kind.variant` (e.g., `knight.main`, `skeleton.main`). If no variant, use `main`.
  - You can set pivots by `kind` or `kind.variant`.
- Readability
  - 1‑px dark outlines help against varied backgrounds. Avoid subpixel anti‑aliasing on edges.
  - Favor solid interior colors or controlled dithering; the renderer applies distance lighting.
- What to avoid
  - Huge sprites (e.g., >256 px tall) — heavy to draw and may not fit camera scale.
  - Soft, semi‑transparent halos; export with sharp alpha and apply alpha‑bleed if necessary.
  - Inconsistent ground lines across variants (causes popping).

## Loader expectations
- Browser: images are decoded via Canvas into unpremultiplied RGBA8; any browser‑supported PNG works.
- Node: PNG only (via `pngjs`). Stick to standard 8‑bit RGBA PNGs.

## Integration notes
- Materials mapping
  - Walls/Floors/Ceilings are arrays; map cells reference 1‑based ids. Keep array order stable.
- Light interaction
  - A neutral albedo leverages the engine’s `LightLUT`. If you need mood shifts, use `MOOD_LUTS` or similar post.

## Quick checklist
- [ ] PNG, RGBA, 8‑bit, sRGB
- [ ] Textures are square, power‑of‑two (64×64 recommended), tile seamlessly
- [ ] Sprites have transparent background, consistent pivot at feet
- [ ] No JPEG artifacts, no soft halos (apply alpha‑bleed), no baked lighting
- [ ] Reasonable sizes (textures ≤128×128; sprites 48–96 px tall)
